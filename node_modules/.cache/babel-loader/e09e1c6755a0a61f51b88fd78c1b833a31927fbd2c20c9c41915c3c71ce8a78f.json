{"ast":null,"code":"import ProductImage from'assets/images/test/mobl.png';import ArrowUp from'assets/images/icons/arrow-up.svg';import ClockIcon from'assets/images/icons/clock.svg';import PriceIcon from'assets/images/icons/price.svg';import useDebounce from'utilities/hooks/useDebounce/useDebounce';import{useEffect,useState}from'react';import classNames from'classnames';import formatDurationInJalali from'utilities/helper/localCalender';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CardItem(_ref){let{item,handleMutate,handleNewVariantMutate}=_ref;const[count,setCount]=useState(0);const[count2,setCount2]=useState(0);const[squareCount,setSquareCount]=useState(0);const[isOther,setIsOther]=useState(false);const[isOther2,setIsOther2]=useState(false);const[selectedVariant,setSelectedVariant]=useState();const debouncedUuid=useDebounce(count,500);const debouncedUuid2=useDebounce(count2,500);// useEffect(() => {\n// \tif (debouncedUuid && debouncedUuid === count) {\n// \t\thandleNewVariantMutate(item.base_uuid, debouncedUuid);\n// \t}\n// }, [debouncedUuid]);\nuseEffect(()=>{if(debouncedUuid2&&debouncedUuid2===count2&&selectedVariant){handleMutate(item.base_uuid,selectedVariant,count2);}},[debouncedUuid2]);return/*#__PURE__*/_jsxs(\"div\",{className:\" rounded-xl border-2 border-gray2 p-2 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex justify-between w-full items-center \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:ProductImage,alt:\"product\",className:\" w-16\"}),/*#__PURE__*/_jsx(\"p\",{children:item.base_name})]}),/*#__PURE__*/_jsx(\"div\",{className:\" flex gap-2 items-center\",children:/*#__PURE__*/_jsx(\"img\",{src:ArrowUp,className:\" bg-gray2 p-1 rounded-md\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\" mx-2 my-2 font-bold\",children:\"\\u062A\\u0639\\u062F\\u0627\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" flex gap-2\",children:[item.variants.map(variant=>/*#__PURE__*/_jsx(\"p\",{className:classNames(variant.variant_uuid===(selectedVariant===null||selectedVariant===void 0?void 0:selectedVariant.variant_uuid)&&!isOther?' text-primary bg-gray2 p-2 rounded-md border border-green':' text-primary bg-gray2 p-2 rounded-md'),onClick:()=>{setIsOther2(true);setIsOther(false);setSelectedVariant(variant);},children:variant.variant_name},variant.variant_uuid)),item.other&&/*#__PURE__*/_jsx(\"p\",{className:isOther?' text-primary bg-gray2 p-2 rounded-md border border-green':' text-primary bg-gray2 p-2 rounded-md',onClick:()=>{setIsOther(true);setIsOther2(false);},children:\"\\u0633\\u0627\\u06CC\\u0631\"})]}),isOther?/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0645\\u062A\\u0631 \\u0645\\u0631\\u0628\\u0639\"}),/*#__PURE__*/_jsx(\"div\",{className:\" flex justify-center text-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" py-2 px-4 mx-1 rounded-md cursor-pointer bg-gray2 text-2xl\",onClick:()=>setSquareCount(squareCount+1),children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{className:\" mx-2\",children:squareCount}),/*#__PURE__*/_jsx(\"div\",{className:\"  py-2 px-5 mx-1 rounded-md cursor-pointer bg-gray2 text-3xl\",onClick:()=>{if(squareCount!==0){setSquareCount(squareCount-1);}},children:\"-\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u062A\\u0639\\u062F\\u0627\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\" flex justify-center text-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" py-2 px-4 mx-1 rounded-md cursor-pointer bg-gray2 text-2xl\",onClick:()=>setCount(count+1),children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{className:\" mx-2\",children:count}),/*#__PURE__*/_jsx(\"div\",{className:\"  py-2 px-5 mx-1 rounded-md cursor-pointer bg-gray2 text-3xl\",onClick:()=>{if(count!==0){setCount(count-1);}},children:\"-\"})]})})]})]}):null,isOther2?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u062A\\u0639\\u062F\\u0627\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\" flex justify-center text-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" py-2 px-4 mx-1 rounded-md cursor-pointer bg-gray2 text-2xl\",onClick:()=>setCount2(count2+1),children:\"+\"}),/*#__PURE__*/_jsx(\"p\",{className:\" mx-2\",children:count2}),/*#__PURE__*/_jsx(\"div\",{className:\"  py-2 px-5 mx-1 rounded-md cursor-pointer bg-gray2 text-3xl\",onClick:()=>{if(count2!==0){setCount2(count2-1);}},children:\"-\"})]})})]}):null,item.variants&&item.variants.length>0?/*#__PURE__*/_jsx(\"div\",{children:item.variants.map(variant=>{if(variant.is_selected){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u062F\\u0631 \\u0633\\u0628\\u062F \\u062E\\u062F\\u0645\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-1 rounded-full mx-1 border px-2 border-primary text-primary inline-block\",children:variant.variant_name},variant.variant_uuid)]});}else{return null;}})}):null,item.base_total_duration?/*#__PURE__*/_jsxs(\"div\",{className:\" my-2 flex justify-between items-center  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:ClockIcon,alt:\"clock\",className:\" p-1 rounded-full bg-gray2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0632\\u0645\\u0627\\u0646 \\u062A\\u0642\\u0631\\u06CC\\u0628\\u06CC:\"})]}),/*#__PURE__*/_jsx(\"p\",{children:formatDurationInJalali(item.base_total_duration)})]}):null,item.base_total_price?/*#__PURE__*/_jsxs(\"div\",{className:\" my-2 flex justify-between items-center  \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:PriceIcon,alt:\"clock\",className:\" p-1 rounded-full bg-gray2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0642\\u06CC\\u0645\\u062A :\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[item.base_total_price.toLocaleString(),\" \\u0647\\u0632\\u0627\\u0631 \\u062A\\u0648\\u0645\\u0627\\u0646\"]})]}):null,isOther?/*#__PURE__*/_jsx(\"button\",{className:\" w-full rounded-lg text-center border border-primary text-primary py-3\",disabled:count===0&&squareCount===0,onClick:()=>{if(count!==0&&squareCount!==0){handleNewVariantMutate(item.base_uuid,debouncedUuid,squareCount);}},children:\"\\u0627\\u0641\\u0632\\u0648\\u062F\\u0646\"}):null]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}